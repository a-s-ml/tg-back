generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model admin_bot {
  id      Int    @id @default(autoincrement())
  bot     Int
  chat_id BigInt
}

model alert_q {
  id          Int      @default(autoincrement())
  chat_id     BigInt
  question_id Int
  dateadd     DateTime @default(now()) @db.Timestamp(0)

  @@id([id, chat_id, question_id])
}

model answer {
  id         Int      @unique(map: "id_UNIQUE") @default(autoincrement())
  chat_id    BigInt
  questionid Int
  group_id   BigInt
  choice     Int
  reward     Float
  dateadd    DateTime @default(now()) @db.Timestamp(0)

  @@id([id, chat_id, questionid, group_id])
  @@index([questionid], map: "answer_question_id_idx")
  @@index([chat_id], map: "chat_id_idx")
  @@index([group_id])
}

model category {
  id   Int    @id @unique(map: "id_UNIQUE") @default(autoincrement())
  name String @unique(map: "name_UNIQUE") @db.VarChar(255)

  @@index([name], map: "name")
}

model chat_act {
  id      Int      @unique(map: "id_UNIQUE") @default(autoincrement())
  chat    BigInt   @unique(map: "chat_UNIQUE")
  res     Int
  dateadd DateTime @default(now()) @db.Timestamp(0)

  @@id([id, chat])
}

model chat_cat {
  id      Int      @unique(map: "id") @default(autoincrement())
  chat_id BigInt
  cat_id  Int
  dateadd DateTime @default(now()) @db.Timestamp(0)

  @@id([id, chat_id, cat_id])
  @@index([cat_id], map: "chat_cat_cat_idx")
  @@index([chat_id], map: "chat_idcat_user_id_idx")
}

model chat_data {
  id            Int      @unique(map: "id_UNIQUE") @default(autoincrement())
  to_group      BigInt
  group_id      BigInt
  thread        Int      @default(0)
  group_type    String   @db.VarChar(255)
  result        Int
  message_id    BigInt
  date          Int
  date_add      DateTime @default(now()) @db.Timestamp(0)
  question_id   Int
  question_type String   @default("0") @db.VarChar(155)
  poll_id       BigInt   @default(0)
  subscribers   Int      @default(0)

  @@id([id, group_id, question_id])
  @@index([group_id], map: "groip_id_user_idx")
  @@index([question_id], map: "question_id_questionid_idx")
}

model like_q {
  id          Int      @unique(map: "id_UNIQUE") @default(autoincrement())
  chat_id     BigInt
  question_id Int
  dateadd     DateTime @default(now()) @db.Timestamp(0)

  @@id([id, chat_id, question_id])
  @@index([chat_id], map: "like_chat_id_idx")
  @@index([question_id], map: "like_question_id_idx")
}

model menuAccount {
  id   Int    @id @default(autoincrement())
  name String @db.VarChar(45)
  text String @db.VarChar(45)
  row  Int
  sort Int
  icon String @db.VarChar(45)
}

model menuMain {
  id   Int    @id @default(autoincrement())
  name String @db.VarChar(45)
  text String @db.VarChar(45)
  sort Int
  icon String @db.VarChar(45)
}

model notice {
  id      Int      @default(autoincrement())
  type    String   @db.VarChar(255)
  chat_id BigInt
  dateadd DateTime @default(now()) @db.Timestamp(0)
  text    String   @db.VarChar(255)
  readn   Int      @default(0)

  @@id([id, chat_id])
}

model pay {
  id          Int      @id @default(autoincrement())
  chat_id     BigInt
  amount      Float    @default(0)
  type        String   @default("0") @db.VarChar(255)
  question_id Int
  group_id    BigInt
  moderate    Int      @default(0)
  dateadd     DateTime @default(now()) @db.Timestamp(0)
}

model question {
  id          Int      @unique(map: "id_UNIQUE") @default(autoincrement())
  text        String   @db.VarChar(700)
  dateadd     DateTime @default(now()) @db.Timestamp(0)
  chat_id     BigInt   @default(0)
  category    Int
  answer1     String   @db.VarChar(255)
  answer2     String   @db.VarChar(255)
  answer3     String   @db.VarChar(255)
  answer4     String   @db.VarChar(255)
  answerright Int      @default(1)
  isactual    Int      @default(0)
  mod         Int      @default(0)
  img         String?  @default("0") @db.VarChar(255)
  slog        Float    @default(50)
  answers     Int      @default(0)

  @@id([id, chat_id, category])
  @@index([text], map: "fulltext")
  @@index([category], map: "id_cat")
  @@index([chat_id], map: "tgid")
}

model time {
  id     Int    @id @default(autoincrement())
  name   String @db.VarChar(255)
  period Int
}

model timeLine {
  id     Int    @id @default(autoincrement())
  name   String @db.VarChar(255)
  period Int
}

model user {
  id                  Int      @unique(map: "id_UNIQUE") @default(autoincrement())
  chat_id             BigInt   @unique(map: "chat_id_UNIQUE")
  is_bot              Int
  activ               Int      @default(1)
  longitude           Float?   @default(0)
  latitude            Float?   @default(0)
  date_reg            DateTime @default(now()) @db.Timestamp(0)
  last_up             DateTime @default(now()) @db.Timestamp(0)
  cash_f_w            Float    @default(0)
  cash_a_w            Float    @default(0)
  cash_q_w            Float    @default(0)
  cash_f_m            Float    @default(0)
  cash_a_m            Float    @default(0)
  cash_q_m            Float    @default(0)
  cash_all            Float    @default(0)
  luck                Float    @default(0)
  referral            BigInt   @default(0)
  question_img        Int      @default(1)
  question_time       Int      @default(5)
  question_timeLine   Int      @default(17)
  question_slog_start Int      @default(0)
  question_slog_end   Int      @default(100)
  d_stst              Int      @default(1)
  fkwallet            String   @default("0") @db.VarChar(255)

  @@id([id, chat_id, referral])
}
